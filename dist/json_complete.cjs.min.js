/* @license BSL-1.0 https://git.io/fpQEc */
"use strict";var n=function(n){var e=n.split(/([A-Z$_]+)/);return{n:e[1],e:Number(e[2])}},e="0123456789abcdefghijklmnopqrstuvwxyz!#%&'()*+-./:;<=>?@[]^`{|}~",r=e.length,t=function(n){var t="";do{t=e[n%r]+t,n=Math.floor(n/r)}while(n);return t},o=function(e,r,o){return o[e]&&0!==o[e].r?1===o[e].r?r.join(","):r.map(function(e){return e.map(function(e){return e.map(function(e){var r=n(e);return r.n+t(r.e)}).join("")}).join(" ")}).join(","):r},u=function(n){return Object.prototype.toString.call(n).slice(8,-1)},i=function(n,e){if(void 0===e)return"K";if(null===e)return"L";if(!0===e)return"T";if(!1===e)return"F";if("number"==typeof e){if(e===1/0)return"I";if(e===-1/0)return"J";if(e!=e)return"C";if(0===e&&1/e==-1/0)return"M"}if("function"==typeof Set&&e instanceof Set)return"U";if("function"==typeof Map&&e instanceof Map)return"V";var r=u(e),t=n.t[r];return t&&"object"==typeof e&&(r=t),n.o[r]},f=function(n){if("function"!=typeof Map||"Map"!==u(new Map))return!1;if("function"!=typeof Symbol||"Symbol"!==u(Symbol())||!n)return!0;var e={};e[Symbol()]=1;for(var r=new Map,t=0;t<50;t+=1)r.set(Object.getOwnPropertySymbols(e)[0],{});return 1===r.size},c=function(n){if(f(n)){var e=new Map;return{u:function(n){return e.get(n)},i:function(n,r){e.set(n,r)},f:function(n,r){r=r||0;var t=0;return e.forEach(function(e){t>=r&&n(e),t+=1}),t}}}var r=[],t=[];return{u:function(n){for(var e=0;e<r.length;e+=1)if(r[e]===n)return t[e]},i:function(n,e){r.push(n),t.push(e)},f:function(n,e){var r;for(r=e||0;r<t.length;r+=1)n(t[r]);return r}}},a=function(n,e){var r,t=[],o={};Array.prototype.forEach.call(n,function(n,e){o[String(e)]=1,t.push(e)}),r=null==n||"string"==typeof n||"number"==typeof n||"boolean"==typeof n||"symbol"==typeof n?[]:Object.keys(n).filter(function(n){return!o[n]}),e&&"function"==typeof Symbol&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(n){return Symbol[String(n).slice(14,-1)]!==n})));var u=0;return t.concat(r).reduce(function(e,r){return r===u?(u+=1,e.c.push(n[r])):(e.a.push(r),e.y.push(n[r])),e},{c:[],a:[],y:[]})},y=function(e,r){if(e.p[r])return e.p[r].l;var t=n(r);return e.p[t.n]?e.d[r].s:r},_=function(n,e){for(var r=0;r<e.m[0].length;r+=1)e.s[r]=y(n,e.m[0][r])},p=function(e,r,t,o){for(var u=0;u<(r.m[t]||[]).length;u+=1){var i=r.m[t][u];if(e.v&&"function"!=typeof Symbol&&"P"===n(i).n)return;r.s[y(e,i)]=y(e,r.m[o][u])}},l=function(e,r){if(e.p[r])return e.p[r].l;var t=n(r);return e.p[t.n].b(e,e.g[t.n][t.e])},s=function(n,e){return 0===e.a.length?n:n.concat([e.a,e.y])},d=function(n){return{w:u(new n),r:2,h:function(n,e){return s([Array.prototype.slice.call(new Uint8Array(n))],e)},b:function(e,r){var t=r[0],o=new n(t.length),u=new Uint8Array(o);return t.forEach(function(n,r){u[r]=l(e,n)}),o},j:function(n,e){_(n,e),p(n,e,1,2)}}},m=function(n){return"function"==typeof ArrayBuffer&&(n.W=d(ArrayBuffer)),"function"==typeof SharedArrayBuffer&&(n.X=d(SharedArrayBuffer)),n},v=function(n){return n.A={w:"Array",r:2,h:function(n,e){return s([e.c],e)},b:function(){return[]},j:function(n,e){_(n,e),p(n,e,1,2)}},n.Q={w:"Arguments",r:2,h:function(n,e){return s([e.c],e)},b:function(n,e){return function(){return arguments}.apply(null,Array(e[0].length))},j:function(n,e){_(n,e),p(n,e,1,2)}},n},b=function(n,e){return{w:u(n("")),r:e||0,h:function(n){return String(n)},b:function(e,r){return n(r)},j:function(){}}},g=function(n){return n.S=b(String),n.N=b(Number,1),n},A=function(n){return{w:u(new n),r:2,h:function(n,e){return s([e.c],e)},b:function(e,r){return new n(r[0].length)},j:function(n,e){_(n,e),p(n,e,1,2)}}},w=function(n){return"function"==typeof BigInt&&(n._=b(BigInt,1)),"function"==typeof BigInt64Array&&(n.BI=A(BigInt64Array)),"function"==typeof BigUint64Array&&(n.BU=A(BigUint64Array)),n},S=function(e,r,t){return{w:e,r:2,h:function(n,e){return s([[void 0].concat(r.map(function(e){return n[e]}))],e)},x:function(n,e,r,t){var o=new FileReader;o.addEventListener("loadend",function(){e[0][0]=r(new Uint8Array(o.result)),t()}),o.readAsArrayBuffer(n)},b:function(e,r){var o=n(r[0][0]),u="un"===o.n?[]:e.g[o.n][o.e][0];return t(e,[new Uint8Array(u.map(function(n){return l(e,n)}))],r[0])},j:function(n,e){p(n,e,1,2)}}},E=function(n){return"function"==typeof Blob&&(n.Y=S("Blob",["type"],function(n,e,r){return new Blob(e,{type:l(n,r[1])})}),n.Z=S("File",["type","name","lastModified"],function(n,e,r){try{return new File(e,l(n,r[2]),{type:l(n,r[1]),lastModified:l(n,r[3])})}catch(o){if(n.v){var t=new Blob(e,{type:l(n,r[1])});return t.name=l(n,r[2]),t.lastModified=l(n,r[3]),t}throw o}})),n},R=function(n){return n.D={w:"Date",r:2,h:function(n,e){return s([[n.valueOf()]],e)},b:function(n,e){return new Date(l(n,e[0][0]))},j:function(n,e){p(n,e,1,2)}},n},N={EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError},T=function(n){return n.E={w:"Error",r:2,h:function(n,e){return s([[N[n.name]?n.name:"Error",n.message,n.stack]],e)},b:function(n,e){var r=e[0],t=new(N[l(n,r[0])]||Error)(l(n,r[1]));return t.stack=l(n,r[2]),t},j:function(n,e){p(n,e,1,2)}},n},h=function(n){return"function"==typeof Set&&(n.U={w:"Set",r:2,h:function(n,e){var r=[];return n.forEach(function(n){r.push(n)}),s([r],e)},b:function(){return new Set},j:function(n,e){e.m[0].forEach(function(r){e.s.add(y(n,r))}),p(n,e,1,2)}}),"function"==typeof Map&&(n.V={w:"Map",r:2,k:1,h:function(n,e){var r=[],t=[];return n.forEach(function(n,e){r.push(e),t.push(n)}),s([r,t],e)},b:function(){return new Map},j:function(n,e){for(var r=0;r<e.m[0].length;r+=1)e.s.set(y(n,e.m[0][r]),y(n,e.m[1][r]));p(n,e,2,3)}}),n},U=function(n){return n.O={w:"Object",r:2,h:function(n,e){return s([],e)},b:function(){return{}},j:function(n,e){p(n,e,0,1)}},n},M=function(n){return void 0===n.flags?n.options:n.flags},V=function(n){return n.R={w:"RegExp",r:2,h:function(n,e){return s([[n.source,M(n),n.lastIndex]],e)},b:function(n,e){var r=e[0],t=new RegExp(l(n,r[0]),l(n,r[1]));return t.lastIndex=l(n,r[2]),t},j:function(n,e){p(n,e,1,2)}},n},B=function(n){return n.K={l:void 0},n.L={l:null},n.T={l:!0},n.F={l:!1},n.I={l:1/0},n.J={l:-1/0},n.C={l:NaN},n.M={l:-0},n},I=function(n){return"function"==typeof Symbol&&(n.P={w:"Symbol",r:0,h:function(n){var e=Symbol.keyFor(n);return void 0!==e?"r"+e:"s"+String(n).slice(7,-1)},b:function(n,e){return"r"===e[0]?Symbol.for(e.slice(1)):Symbol(e.slice(1))},j:function(){}}),n},F=function(n){return"function"==typeof Int8Array&&(n.IE=A(Int8Array)),"function"==typeof Int16Array&&(n.IS=A(Int16Array)),"function"==typeof Int32Array&&(n.IT=A(Int32Array)),"function"==typeof Uint8Array&&(n.$=A(Uint8Array)),"function"==typeof Uint8ClampedArray&&(n.UC=A(Uint8ClampedArray)),"function"==typeof Uint16Array&&(n.US=A(Uint16Array)),"function"==typeof Uint32Array&&(n.UT=A(Uint32Array)),"function"==typeof Float32Array&&(n.FT=A(Float32Array)),"function"==typeof Float64Array&&(n.FS=A(Float64Array)),n},O=function(n){return{w:"_"+u(new n("")),r:2,h:function(n,e){return s([[n.valueOf()]],e)},b:function(e,r){return new n(l(e,r[0][0]))},j:function(n,e){p(n,e,1,2)}}},j=function(n){return n.B=O(Boolean),n.G=O(String),n.H=O(Number),n},x={},C=x=w(x=E(x=m(x=F(x=h(x=I(x=T(x=V(x=R(x=U(x=v(x=j(x=g(x=B(x)))))))))))))),k=function(n,e){var r=i(n,e);if(!r&&!n.v){var t=u(e);throw new Error('Cannot encode unsupported type "'+t+'".')}return r||"O"},z=function(n,e){var r=k(n,e);if(!n.p[r].j)return r;var t=n.z.u(e,r);if(void 0!==t)return t.q;n.nn[r]=n.nn[r]||[],n.nn[r].push(0);var o=n.nn[r].length-1,u={n:r,e:o,q:r+o,s:e};return n.z.i(e,u),n.p[r].x&&n.en.push(u),u.q},D=function(n,e){return n.z.f(function(e){var r=C[e.n].h(e.s,a(e.s,n.rn));"String"!==u(r)&&(r=r.map(function(e){return e.map(function(e){return z(n,e)})})),n.nn[e.n][e.e]=r},e)},J=function(n,e){var r=JSON.stringify([e,"2.0.0"].concat(Object.keys(n.nn).map(function(e){return[e,o(e,n.nn[e],n.p)]})));if("function"!=typeof n.tn)return r;n.tn(r)},q=function(n,e){e=e||{};var r={},t={};Object.keys(C).forEach(function(n){var e=C[n].w;e&&(r[e]=n),"_"===(e||"")[0]&&(t[e.slice(1)]=e)});var o={v:e.compat,rn:e.encodeSymbolKeys,tn:e.onFinish,p:C,o:r,t:t,z:c(e.encodeSymbolKeys),en:[],nn:{}},u=z(o,n),i=D(o);if(!(o.en.length>0))return J(o,u);if("function"!=typeof e.onFinish){if(o.v)return J(o,u);throw new Error("Deferred Types require onFinish option.")}var f=o.en.length,a=function(){if(0===(f-=1))return D(o,i),J(o,u)};o.en.forEach(function(n){C[n.n].x(n.s,o.nn[n.n][n.e],function(n){return z(o,n)},a)})},K=e.length,Z=function(n){return n.split("").reduce(function(n,r){return n*K+e.indexOf(r)},0)},$=function(n,e,r){return r[n]&&0!==r[n].r?1===r[n].r?e.split(","):e.split(",").map(function(n){return n.split(" ").map(function(n){for(var e=n.split(/([A-Z$_]+)/).slice(1),t=[],o=0;o<e.length;o+=2){var u=e[o],i=r[u]&&!r[u].w;t.push(i?u:u+Z(e[o+1]))}return t})}):e},L=function n(e,r){"Array"===u(r)?r.forEach(function(r){n(e,r)}):e.on.push(r)},P=function(e,r){var t=n(r);if(!C[t.n]){if(e.v)return;throw new Error('Cannot decode unrecognized pointer type "'+t.n+'".')}if(!C[r]&&void 0===e.d[r]){e.d[r]={n:t.n,e:t.e,q:r,s:void 0,m:e.g[t.n][t.e]};try{e.d[r].s=C[t.n].b(e,e.g[t.n][t.e])}catch(n){if(!e.v)throw new Error('Cannot decode recognized pointer type "'+t.n+'".')}"Array"===u(e.d[r].m)&&L(e,e.d[r].m)}},G=function(e,r){r=r||{};var t=JSON.parse(e),o=t.slice(2).reduce(function(n,e){return n[e[0]]=$(e[0],e[1],C),n},{}),u=t[0],i={v:r.compat,p:C,g:o,d:{},on:[]};if(C[u])return C[u].l;var f=n(u);if(!C[f.n]){if(i.v)return u;throw new Error('Cannot decode unrecognized pointer type "'+f.n+'".')}for(i.on.push(u);i.on.length;)P(i,i.on.shift());return Object.keys(i.d).forEach(function(n){var e=i.d[n];C[e.n].j(i,e)}),i.d[u].s},H={encode:q,decode:G};module.exports=H;